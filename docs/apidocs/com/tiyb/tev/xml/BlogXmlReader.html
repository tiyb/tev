<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.4) on Thu Dec 12 11:51:19 EST 2019 -->
<title>BlogXmlReader (tev v7.0.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-12-12">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BlogXmlReader (tev v7.0.2 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlogXmlReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.tiyb.tev.xml</a></div>
<h2 title="Class BlogXmlReader" class="title">Class BlogXmlReader</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="TEVXmlReader.html" title="class in com.tiyb.tev.xml">com.tiyb.tev.xml.TEVXmlReader</a></li>
<li>
<ul class="inheritance">
<li>com.tiyb.tev.xml.BlogXmlReader</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">BlogXmlReader</span>
extends <a href="TEVXmlReader.html" title="class in com.tiyb.tev.xml">TEVXmlReader</a></pre>
<div class="block"><p>
 This class is responsible for parsing the XML file exported from Tumblr for a
 user's <b>blogs</b>. It leverages the <b>StAX</b> library's event-based
 processing model to read the file.
 </p>
 
 <p>
 The XML export from Tumblr is... not always a well thought out piece of
 information architecture. There are inconsistencies as to how some things are
 structured, and so it had to be reverse engineered to figure things out.
 Especially when it comes to "photo" posts, where there are inconsistent ways
 in which links to photos are handled. That being said, the <i>general</i>
 structure is that there is a <code>&lt;post&gt;</code> element for each post,
 with attributes for all of the data that is common to any kind of a post
 (URL, "slug," date it was posted in a couple of different formats, etc.).
 Under that <code>&lt;post&gt;</code> element are child elements, where the
 child elements to be found are very different depending on the type of post.
 An "answer" post, for example, will have two child elements (for the question
 and the answer), whereas a "photo" post will have numerous child elements
 covering the post's caption, various sizes of the images, etc.
 </p>
 
 <p>
 Not all of the attributes or elements in the document are pulled out, only
 the ones that are useful for the TEV application (or deemed to be potentially
 useful). Probably about 90% of the information is retrieved, with the rest
 being discarded.
 </p>
 
 <p>
 The general approach taken is that the
 <a href="#parseDocument(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,com.tiyb.tev.controller.TEVMetadataRestController)"><code>parseDocument()</code></a> method sets up some initial variables, the
 <a href="#readPosts(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,boolean)"><code>readPosts()</code></a>
 method then goes through the document post-by-post, and as it determines what
 type each post is, additional methods are called to read the additional,
 type-specific XML within the post's XML element (answer, link, photo, etc.).
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>tiyb</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.com.tiyb.tev.xml.TEVXmlReader">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.tiyb.tev.xml.<a href="TEVXmlReader.html" title="class in com.tiyb.tev.xml">TEVXmlReader</a></h3>
<code><a href="TEVXmlReader.html#END_OF_FILE_ERROR">END_OF_FILE_ERROR</a>, <a href="TEVXmlReader.html#logger">logger</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">BlogXmlReader</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addTagToString(java.lang.String,java.lang.String)">addTagToString</a></span>&#8203;(java.lang.String&nbsp;original,
              java.lang.String&nbsp;tag)</code></th>
<td class="colLast">
<div class="block">Helper function to add a tag to a list of tags; the resultant list is
 comma-separated.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseDocument(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,com.tiyb.tev.controller.TEVMetadataRestController)">parseDocument</a></span>&#8203;(java.io.InputStream&nbsp;xmlFile,
             <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postController,
             <a href="../controller/TEVMetadataRestController.html" title="class in com.tiyb.tev.controller">TEVMetadataRestController</a>&nbsp;mdController)</code></th>
<td class="colLast">
<div class="block">
 This is the main method of the class, which kicks off the processing of the
 document.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private static <a href="../datamodel/Answer.html" title="class in com.tiyb.tev.datamodel">Answer</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readAnswer(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">readAnswer</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
          <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)</code></th>
<td class="colLast">
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to an "answer" post.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private static <a href="../datamodel/Link.html" title="class in com.tiyb.tev.datamodel">Link</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readLink(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">readLink</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
        <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
        <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)</code></th>
<td class="colLast">
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "link" post.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private static java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readPhotos(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">readPhotos</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
          <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)</code></th>
<td class="colLast">
<div class="block">
 This method is responsible for reading the sub-content under a post for
 content related to a "photo" post.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readPhotoStream(javax.xml.stream.XMLEventReader,java.lang.Long,java.lang.String,java.util.List)">readPhotoStream</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
               java.lang.Long&nbsp;postID,
               java.lang.String&nbsp;photoCaption,
               java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;photos)</code></th>
<td class="colLast">
<div class="block">This method is responsible for reading the sub-components of a "photo" post
 specific to the "photoset".</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readPostAttributes(javax.xml.stream.events.StartElement,com.tiyb.tev.datamodel.Post)">readPostAttributes</a></span>&#8203;(javax.xml.stream.events.StartElement&nbsp;startElement,
                  <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code></th>
<td class="colLast">
<div class="block">Helper function specifically for reading the attributes from a
 <code>&lt;post&gt;</code> element.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readPosts(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,boolean)">readPosts</a></span>&#8203;(java.io.InputStream&nbsp;xmlFile,
         <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController,
         boolean&nbsp;isOverwritePosts)</code></th>
<td class="colLast">
<div class="block">
 This is the first method that starts to get into the work of actually reading
 the XML file.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private static <a href="../datamodel/Regular.html" title="class in com.tiyb.tev.datamodel">Regular</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readRegular(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">readRegular</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
           <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
           <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)</code></th>
<td class="colLast">
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "regular" post.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private static <a href="../datamodel/Video.html" title="class in com.tiyb.tev.datamodel">Video</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readVideos(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">readVideos</a></span>&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
          <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)</code></th>
<td class="colLast">
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "video" post.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.com.tiyb.tev.xml.TEVXmlReader">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.tiyb.tev.xml.<a href="TEVXmlReader.html" title="class in com.tiyb.tev.xml">TEVXmlReader</a></h3>
<code><a href="TEVXmlReader.html#readCharacters(javax.xml.stream.XMLEventReader)">readCharacters</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlogXmlReader</h4>
<pre>public&nbsp;BlogXmlReader()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="parseDocument(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,com.tiyb.tev.controller.TEVMetadataRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseDocument</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;parseDocument&#8203;(java.io.InputStream&nbsp;xmlFile,
                                 <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postController,
                                 <a href="../controller/TEVMetadataRestController.html" title="class in com.tiyb.tev.controller">TEVMetadataRestController</a>&nbsp;mdController)
                          throws <a href="../exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></pre>
<div class="block"><p>
 This is the main method of the class, which kicks off the processing of the
 document. It doesn't do much work itself, it simply calls the
 <a href="#readPosts(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,boolean)"><code>readPosts()</code></a>
 method to get into the actual XML document.
 </p>
 
 <p>
 The one piece of logic actually performed by this method is to delete all of
 the data in the database (via the REST controller), if the "overwrite post
 data" option is set.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmlFile</code> - <code>InputStream</code> containing the
                       XML document to be parsed.</dd>
<dd><code>postController</code> - REST controller for the application, used for storing
                       data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></code></dd>
</dl>
</li>
</ul>
<a id="readPosts(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPosts</h4>
<pre class="methodSignature">private static&nbsp;void&nbsp;readPosts&#8203;(java.io.InputStream&nbsp;xmlFile,
                              <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController,
                              boolean&nbsp;isOverwritePosts)
                       throws <a href="../exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></pre>
<div class="block"><p>
 This is the first method that starts to get into the work of actually reading
 the XML file. Luckily, the structure of the <code>&lt;post&gt;</code> element
 is such that the generic, post-related information is contained in
 attributes, while the data that changes based on type is contained in child
 elements. This means that parsing the <code>&lt;post&gt;</code> element works
 like this:
 </p>
 
 <ol>
 <li>As the "start element" event is encountered for each post, a new
 <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel"><code>Post</code></a> object is created</li>
 <li>The attributes are read into that object via the
 <a href="#readPostAttributes(javax.xml.stream.events.StartElement,com.tiyb.tev.datamodel.Post)"><code>readPostAttributes()</code></a> method
 to populate its data</li>
 <li>The post is inserted into the DB via the REST controller.
 <ul>
 <li>If the "overwrite posts" option is set in the metadata, the logic first
 checks to see if the post already exists, and only inserts it if it
 doesn't.</li>
 <li>A boolean value is set, based on this logic, so that insertions of
 subsequent data for this post doesn't have to figure it out all over
 again.</li>
 </ul>
 </li>
 <li>Depending on the value of the <code>type</code> attribute, one of the
 additional methods is called to parse the type-specific data</li>
 <li>Those child methods populate their own objects, and then use the REST
 controller to insert the data into the DB
 <ul>
 <li>The previously set boolean is checked first, before submitting the
 data.</li>
 </ul>
 </li>
 <li>A final update of the post is done. This is necessary because tags for
 the post were discovered <i>after</i> the post was originally inserted.</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmlFile</code> - The stream containing the XML file to be parsed</dd>
<dd><code>postRestController</code> - REST controller used for storing the data</dd>
<dd><code>isOverwritePosts</code> - Indicates whether this is a clean upload, or
                           additive; the REST controller could have been used
                           to determine this, but since the calling method
                           needed to figure it out anyway, it was just as easy
                           to pass it as a parameter.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></code></dd>
</dl>
</li>
</ul>
<a id="readPostAttributes(javax.xml.stream.events.StartElement,com.tiyb.tev.datamodel.Post)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPostAttributes</h4>
<pre class="methodSignature">private static&nbsp;void&nbsp;readPostAttributes&#8203;(javax.xml.stream.events.StartElement&nbsp;startElement,
                                       <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</pre>
<div class="block">Helper function specifically for reading the attributes from a
 <code>&lt;post&gt;</code> element. The logic could easily have been
 incorporated into
 <a href="#readPosts(java.io.InputStream,com.tiyb.tev.controller.TEVPostRestController,boolean)"><code>readPosts()</code></a>,
 but the method would have gotten much longer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startElement</code> - The <code>StartElement</code> object being processed</dd>
<dd><code>post</code> - The <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel"><code>Post</code></a> object to
                     which the data from each element should be added</dd>
</dl>
</li>
</ul>
<a id="readRegular(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRegular</h4>
<pre class="methodSignature">private static&nbsp;<a href="../datamodel/Regular.html" title="class in com.tiyb.tev.datamodel">Regular</a>&nbsp;readRegular&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                                   <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                                   <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)
                            throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "regular" post. The content is very simple, containing
 only "regular-title" and "regular-body" elements.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The <code>XMLEventReader</code> object for the XML document being
                           parsed.</dd>
<dd><code>post</code> - The current post, for use as the primary key of the
                           Regular object and for setting tags</dd>
<dd><code>postRestController</code> - The REST controller for working with posts, used
                           for inserting Hashtags into the DB</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <a href="../datamodel/Regular.html" title="class in com.tiyb.tev.datamodel"><code>Regular</code></a> object with the data
         read</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="readAnswer(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAnswer</h4>
<pre class="methodSignature">private static&nbsp;<a href="../datamodel/Answer.html" title="class in com.tiyb.tev.datamodel">Answer</a>&nbsp;readAnswer&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                                 <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                                 <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)
                          throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to an "answer" post. The content is very simple, containing
 only "question" and "answer" elements.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader parsing the current document</dd>
<dd><code>post</code> - The current post, for use as the primary key of the
                           Answer object and for setting tags</dd>
<dd><code>postRestController</code> - The REST controller for working with posts, for
                           inserting hashtags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The "answer" data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="readLink(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLink</h4>
<pre class="methodSignature">private static&nbsp;<a href="../datamodel/Link.html" title="class in com.tiyb.tev.datamodel">Link</a>&nbsp;readLink&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                             <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                             <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)
                      throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "link" post. The content contains only three elements:
 "link-description", "link-text", and "link-url".</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event parser</dd>
<dd><code>post</code> - The currently processed post</dd>
<dd><code>postRestController</code> - The REST controller for working with posts, for
                           inserting hashtags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The link data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="readPhotos(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPhotos</h4>
<pre class="methodSignature">private static&nbsp;java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;readPhotos&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                                                <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                                                <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)
                                         throws javax.xml.stream.XMLStreamException</pre>
<div class="block"><p>
 This method is responsible for reading the sub-content under a post for
 content related to a "photo" post. This is the most complex of the post
 types, as far as the XML is concerned, and is also the least consistent.
 There is one child element that always appears ("photo-caption"), and then
 there is content for each photo within the post. For each photo, there are 6
 "photo-url" elements, for URLs to differently sized versions of the same
 image (1280, 500, 400, ...).
 </p>
 
 <p>
 The tricky part, for "photo" posts, is that there could be <i>one</i> photo,
 or there could be <i>multiple</i> (each with 6 "photo-url" elements), and the
 structure is different for both cases:
 </p>
 
 <ul>
 <li>If there is only one photo, it is represented by simply appending the 6
 "photo-url" elements right to the main "post" element</li>
 <li>If there are multiple photos, Tumblr treats it like a <b>photoset</b>, in
 which case a "photoset" element is added to the "post", under which is one
 "photo" element for each photo, under which are the 6 "photo-url" elements
 (the same as for a single photo).</li>
 <li>Even in the case where there is a "photoset", the <i>first</i> image in
 that photoset is duplicated, as 6 "photo-url" elements under the "post"
 element. These "photo-url" elements come before the "photoset", so they're
 read before the XML parser even realizes that there is a "photoset"
 coming.</li>
 </ul>
 
 <p>
 In order to deal with this complexity, processing of a "photo" post works as
 follows:
 </p>
 
 <ol>
 <li>The "photo-caption" element is read in. (It is added to every
 <code>Photo</code> object created, which is not optimal, but... still.)</li>
 <li>Any "photo-url" elements are read in, and the information is saved for
 later use</li>
 <li><i>If</i> there is a "photoset" element, a sub-method is called for
 parsing the content. That method will create a
 <a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel"><code>Photo</code></a> object for each photo it
 encounters.</li>
 <li>When the end of the "post" element is reached, the list of
 <a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel"><code>Photo</code></a> objects is checked, to see if any
 were created (as part of a photoset) or not; if not, a single
 <a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel"><code>Photo</code></a> object is created, with the URL
 and caption data already collected, and put in the collection. If the
 collection is already populated, it is simply returned as-is, since the
 "photo-url" elements at the root of the <code>&lt;post&gt;</code> element are
 duplicated in the "photoset", and have therefore already been added.</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader being used to parse the XML</dd>
<dd><code>post</code> - The currently processed post</dd>
<dd><code>postRestController</code> - The REST controller for working with posts, for
                           inserting hashtags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of <a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel"><code>Photo</code></a> objects</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="readPhotoStream(javax.xml.stream.XMLEventReader,java.lang.Long,java.lang.String,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPhotoStream</h4>
<pre class="methodSignature">private static&nbsp;java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;readPhotoStream&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                                                     java.lang.Long&nbsp;postID,
                                                     java.lang.String&nbsp;photoCaption,
                                                     java.util.List&lt;<a href="../datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;photos)
                                              throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-components of a "photo" post
 specific to the "photoset". Within a photoset, there are multiple "photo"
 elements, each of which contains 6 "photo-url" elements, for the different
 sizes of that photo. Because there is some duplication in the model, the
 caption is passed from the parent method into this one, and added to each
 photo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader used for parsing</dd>
<dd><code>postID</code> - The ID of the currently processed post</dd>
<dd><code>photoCaption</code> - The caption to be used on each photo</dd>
<dd><code>photos</code> - The list of photos that already exists, to which new
                     photos will be added.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="readVideos(javax.xml.stream.XMLEventReader,com.tiyb.tev.datamodel.Post,com.tiyb.tev.controller.TEVPostRestController)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readVideos</h4>
<pre class="methodSignature">private static&nbsp;<a href="../datamodel/Video.html" title="class in com.tiyb.tev.datamodel">Video</a>&nbsp;readVideos&#8203;(javax.xml.stream.XMLEventReader&nbsp;reader,
                                <a href="../datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                                <a href="../controller/TEVPostRestController.html" title="class in com.tiyb.tev.controller">TEVPostRestController</a>&nbsp;postRestController)
                         throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "video" post. The content contains a number of elements,
 most of which are simply read into a property of the <code>Video</code>
 object
 
 <ul>
 <li>content-type</li>
 <li>extension (the filename extension)</li>
 <li>width</li>
 <li>height</li>
 <li>duration</li>
 <li>revision</li>
 <li>video-caption (the body of the post)</li>
 <li>multiple "video-player" elements (for different sizes of the video) which
 are ignored</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event parser</dd>
<dd><code>post</code> - The currently processed post</dd>
<dd><code>postRestController</code> - The REST controller for working with posts, for
                           inserting hashtags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The video data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a id="addTagToString(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>addTagToString</h4>
<pre class="methodSignature">private static&nbsp;java.lang.String&nbsp;addTagToString&#8203;(java.lang.String&nbsp;original,
                                               java.lang.String&nbsp;tag)</pre>
<div class="block">Helper function to add a tag to a list of tags; the resultant list is
 comma-separated. Hashtagas are always converted to lowercase.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>original</code> - The existing list of tags (which could be empty)</dd>
<dd><code>tag</code> - The tag to be added</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Amended string</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlogXmlReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2019. All rights reserved.</small></p>
</footer>
</body>
</html>
