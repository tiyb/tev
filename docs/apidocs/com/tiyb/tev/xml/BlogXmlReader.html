<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Mon Jun 03 19:31:27 EDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BlogXmlReader (tev v3.3.4 API)</title>
<meta name="date" content="2019-06-03">
<link rel="stylesheet" type="text/css" href="../../../../customstylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BlogXmlReader (tev v3.3.4 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlogXmlReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/tiyb/tev/xml/ConversationXmlReader.html" title="class in com.tiyb.tev.xml"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/tiyb/tev/xml/BlogXmlReader.html" target="_top">Frames</a></li>
<li><a href="BlogXmlReader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.tiyb.tev.xml</div>
<h2 title="Class BlogXmlReader" class="title">Class BlogXmlReader</h2>
</div>
<div class="contentContainer">
<map id="APIVIZ" name="APIVIZ">
<area shape="rect" id="node1" href="BlogXmlReader.html" title="«static» BlogXmlReader" alt="" coords="15,99,127,139"/>
<area shape="rect" id="node2" title="«interface» XMLEventReader (javax.xml.stream)" alt="" coords="5,5,136,60"/>
</map>
<div id="apivizContainer" style="text-align: center;"><img src="BlogXmlReader.png" usemap="#APIVIZ" border="0"></div>
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.tiyb.tev.xml.BlogXmlReader</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">BlogXmlReader</span>
extends java.lang.Object</pre>
<div class="block"><p>
 This class is responsible for parsing the XML file exported from Tumblr for a
 user's <b>blogs</b>. It leverages the <b>StAX</b> library's event-based
 processing model to read the file.
 </p>
 
 <p>
 The XML export from Tumblr is... not always a well thought out piece of
 information architecture. There are inconsistencies as to how some things are
 structured, and so it had to be reverse engineered to figure things out.
 Especially when it comes to "photo" posts, where there are inconsistent ways
 in which links to photos are handled. That being said, the <i>general</i>
 structure is that there is a <code>&lt;post&gt;</code> element for each post,
 with attributes for all of the data that is common to any kind of a post
 (URL, "slug," date it was posted in a couple of different formats, etc.).
 Under that <code>&lt;post&gt;</code> element are child elements, where the
 child elements to be found are very different depending on the type of post.
 An "answer" post, for example, will have two child elements (for the question
 and the answer), whereas a "photo" post will have numerous child elements
 covering the post's caption, various sizes of the images, etc.
 </p>
 
 <p>
 Not all of the attributes or elements in the document are pulled out, only
 the ones that are useful for the TEV application (or deemed to be potentially
 useful). Probably about 90% of the information is retrieved, with the rest
 being discarded.
 </p>
 
 <p>
 The general approach taken is that the <code>parseDocument()</code> method
 sets up some initial variables, the <code>readPosts()</code> method then goes
 through the document post-by-post, and as it determines what type each post
 is, additional methods are called to read the additional, type-specific XML
 within the post's XML element (answer, link, photo, etc.).
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>tiyb</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#END_OF_FILE_ERROR">END_OF_FILE_ERROR</a></span></code>
<div class="block">Value used for the exception encountered when XML parsing fails because of
 unexpected conditions (i.e.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#BlogXmlReader--">BlogXmlReader</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#addTagToString-java.lang.String-java.lang.String-">addTagToString</a></span>(java.lang.String&nbsp;original,
              java.lang.String&nbsp;tag)</code>
<div class="block">Helper function to add a tag to a list of tags; the intent is for the list to
 be comma-separated</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#loadTypeData-java.util.List-java.util.Map-java.util.Map-">loadTypeData</a></span>(java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Type.html" title="class in com.tiyb.tev.datamodel">Type</a>&gt;&nbsp;allowableTypes,
            java.util.Map&lt;java.lang.Long,java.lang.String&gt;&nbsp;typeEntries,
            java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs)</code>
<div class="block">Helper function which does nothing but create two opposite <code>Map</code>
 objects, with Type data:
 
 
 One with the ID as the key, and the type as the field, and
 One with the type as the key, and the ID as the field
 </div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#parseDocument-java.io.InputStream-com.tiyb.tev.controller.TEVRestController-">parseDocument</a></span>(java.io.InputStream&nbsp;xmlFile,
             <a href="../../../../com/tiyb/tev/controller/TEVRestController.html" title="class in com.tiyb.tev.controller">TEVRestController</a>&nbsp;restController)</code>
<div class="block">
 This is the main method of the class, which kicks off the processing of the
 document.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../com/tiyb/tev/datamodel/Answer.html" title="class in com.tiyb.tev.datamodel">Answer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readAnswer-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">readAnswer</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to an "answer" post.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readCharacters-javax.xml.stream.XMLEventReader-">readCharacters</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader)</code>
<div class="block">
 This is a helper function, which reads characters out of an element, up to
 the end of that element (the closing tag).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../com/tiyb/tev/datamodel/Link.html" title="class in com.tiyb.tev.datamodel">Link</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readLink-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">readLink</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
        <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "link" post.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private static java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readPhotos-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">readPhotos</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code>
<div class="block">
 This method is responsible for reading the sub-content under a post for
 content related to a "photo" post.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private static java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readPhotoStream-javax.xml.stream.XMLEventReader-java.lang.Long-java.lang.String-java.util.List-">readPhotoStream</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
               java.lang.Long&nbsp;postID,
               java.lang.String&nbsp;photoCaption,
               java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;photos)</code>
<div class="block">This method is responsible for reading the sub-components of a "photo" post
 specific to the "photoset".</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readPostAttributes-javax.xml.stream.events.StartElement-com.tiyb.tev.datamodel.Post-java.util.Map-">readPostAttributes</a></span>(javax.xml.stream.events.StartElement&nbsp;se,
                  <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                  java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs)</code>
<div class="block">Helper function specifically for reading the attributes from a
 <code>&lt;post&gt;</code> element.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readPosts-java.io.InputStream-java.util.Map-java.util.Map-com.tiyb.tev.controller.TEVRestController-boolean-">readPosts</a></span>(java.io.InputStream&nbsp;xmlFile,
         java.util.Map&lt;java.lang.Long,java.lang.String&gt;&nbsp;typeEntries,
         java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs,
         <a href="../../../../com/tiyb/tev/controller/TEVRestController.html" title="class in com.tiyb.tev.controller">TEVRestController</a>&nbsp;restController,
         boolean&nbsp;isOverwritePosts)</code>
<div class="block">
 This is the first method that starts to get into the work of actually reading
 the XML file.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private static <a href="../../../../com/tiyb/tev/datamodel/Regular.html" title="class in com.tiyb.tev.datamodel">Regular</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readRegular-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">readRegular</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
           <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "regular" post.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../com/tiyb/tev/datamodel/Video.html" title="class in com.tiyb.tev.datamodel">Video</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/tiyb/tev/xml/BlogXmlReader.html#readVideos-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">readVideos</a></span>(javax.xml.stream.XMLEventReader&nbsp;reader,
          <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)</code>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "video" post.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="END_OF_FILE_ERROR">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>END_OF_FILE_ERROR</h4>
<pre>private static final&nbsp;java.lang.String END_OF_FILE_ERROR</pre>
<div class="block">Value used for the exception encountered when XML parsing fails because of
 unexpected conditions (i.e. a closing tag was expected but never arrived).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.tiyb.tev.xml.BlogXmlReader.END_OF_FILE_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BlogXmlReader--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlogXmlReader</h4>
<pre>public&nbsp;BlogXmlReader()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="parseDocument-java.io.InputStream-com.tiyb.tev.controller.TEVRestController-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseDocument</h4>
<pre>public static&nbsp;void&nbsp;parseDocument(java.io.InputStream&nbsp;xmlFile,
                                 <a href="../../../../com/tiyb/tev/controller/TEVRestController.html" title="class in com.tiyb.tev.controller">TEVRestController</a>&nbsp;restController)
                          throws <a href="../../../../com/tiyb/tev/exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></pre>
<div class="block"><p>
 This is the main method of the class, which kicks off the processing of the
 document. It doesn't do much work itself, it simply sets up some type-related
 metadata, and calls the <code>readPosts()</code> method to get into the
 actual XML document.
 </p>
 
 <p>
 The one piece of logic actually performed by this method is to delete all of
 the data in the database (via the REST controller), if the "overwrite post
 data" option is set.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmlFile</code> - <code>InputStream</code> containing the XML document to
                       be parsed.</dd>
<dd><code>restController</code> - REST controller for the application, used for storing
                       data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/tiyb/tev/exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></code></dd>
</dl>
</li>
</ul>
<a name="readPosts-java.io.InputStream-java.util.Map-java.util.Map-com.tiyb.tev.controller.TEVRestController-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPosts</h4>
<pre>private static&nbsp;void&nbsp;readPosts(java.io.InputStream&nbsp;xmlFile,
                              java.util.Map&lt;java.lang.Long,java.lang.String&gt;&nbsp;typeEntries,
                              java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs,
                              <a href="../../../../com/tiyb/tev/controller/TEVRestController.html" title="class in com.tiyb.tev.controller">TEVRestController</a>&nbsp;restController,
                              boolean&nbsp;isOverwritePosts)
                       throws <a href="../../../../com/tiyb/tev/exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></pre>
<div class="block"><p>
 This is the first method that starts to get into the work of actually reading
 the XML file. Luckily, the structure of the <code>&lt;post&gt;</code> element
 is such that the generic, post-related information is contained in
 attributes, while the data that changes based on type is contained in child
 elements. This means that parsing the <code>&lt;post&gt;</code> element works
 like this:
 </p>
 
 <ol>
 <li>As the "start element" event is encountered for each post, a new
 <code>Post</code> object is created</li>
 <li>The attributes are read into that object via the
 <code>readPostAttributes()</code> method to populate its data</li>
 <li>The post is inserted into the DB via the REST controller.
 <ul>
 <li>If the "overwrite posts" option is set in the metadata, the logic first
 checks to see if the post already exists, and only inserts it if it
 doesn't.</li>
 <li>A boolean value is set, based on this logic, so that insertions of
 subsequent data for this post doesn't have to figure it out all over
 again.</li>
 </ul>
 </li>
 <li>Depending on the value of the <code>type</code> attribute, one of the
 additional methods is called to parse the type-specific data</li>
 <li>Those child methods populate their own objects, and then use the REST
 controller to insert the data into the DB
 <ul>
 <li>The previously set boolean is checked first, before submitting the
 data.</li>
 </ul>
 </li>
 <li>A final update of the post is done. This is necessary because tags for
 the post were discovered <i>after</i> the post was originally inserted.</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmlFile</code> - The stream containing the XML file to be parsed</dd>
<dd><code>typeEntries</code> - A list of available types, in a <code>Map</code> for
                         easy access by ID</dd>
<dd><code>typeIDs</code> - A list of available types, in a <code>Map</code> for
                         easy access by name</dd>
<dd><code>restController</code> - REST controller used for storing the data</dd>
<dd><code>isOverwritePosts</code> - Indicates whether this is a clean upload, or
                         additive; the REST controller could have been used to
                         determine this, but since the calling method needed
                         to figure it out anyway, it was just as easy to pass
                         it as a parameter.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/tiyb/tev/exception/XMLParsingException.html" title="class in com.tiyb.tev.exception">XMLParsingException</a></code></dd>
</dl>
</li>
</ul>
<a name="readPostAttributes-javax.xml.stream.events.StartElement-com.tiyb.tev.datamodel.Post-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPostAttributes</h4>
<pre>private static&nbsp;void&nbsp;readPostAttributes(javax.xml.stream.events.StartElement&nbsp;se,
                                       <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post,
                                       java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs)</pre>
<div class="block">Helper function specifically for reading the attributes from a
 <code>&lt;post&gt;</code> element. The logic could easily have been
 incorporated into <code>readPosts()</code>, but the method would have gotten
 much longer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>se</code> - The <code>StartElement</code> object being processed</dd>
<dd><code>post</code> - The <code>Post</code> object to which the data from each
                element should be added</dd>
<dd><code>typeIDs</code> - The <code>Map</code> containing the list of types</dd>
</dl>
</li>
</ul>
<a name="readRegular-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRegular</h4>
<pre>private static&nbsp;<a href="../../../../com/tiyb/tev/datamodel/Regular.html" title="class in com.tiyb.tev.datamodel">Regular</a>&nbsp;readRegular(javax.xml.stream.XMLEventReader&nbsp;reader,
                                   <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)
                            throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "regular" post. The content is very simple, containing
 only "regular-title" and "regular-body" elements.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The <code>XMLEventReader</code> object for the XML document
               being parsed.</dd>
<dd><code>post</code> - The current post, for use as the primary key of the
               <code>Regular</code> object and for setting tags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <code>Regular</code> object with the data read</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readAnswer-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAnswer</h4>
<pre>private static&nbsp;<a href="../../../../com/tiyb/tev/datamodel/Answer.html" title="class in com.tiyb.tev.datamodel">Answer</a>&nbsp;readAnswer(javax.xml.stream.XMLEventReader&nbsp;reader,
                                 <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)
                          throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to an "answer" post. The content is very simple, containing
 only "question" and "answer" elements.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader parsing the current document</dd>
<dd><code>post</code> - The current post, for use as the primary key of the
               <code>Answer</code> object and for setting tags</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The "answer" data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readLink-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLink</h4>
<pre>private static&nbsp;<a href="../../../../com/tiyb/tev/datamodel/Link.html" title="class in com.tiyb.tev.datamodel">Link</a>&nbsp;readLink(javax.xml.stream.XMLEventReader&nbsp;reader,
                             <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)
                      throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "link" post. The content contains only three elements:
 "link-description", "link-text", and "link-url".</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event parser</dd>
<dd><code>post</code> - The currently processed post</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The link data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readPhotos-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPhotos</h4>
<pre>private static&nbsp;java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;readPhotos(javax.xml.stream.XMLEventReader&nbsp;reader,
                                                <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)
                                         throws javax.xml.stream.XMLStreamException</pre>
<div class="block"><p>
 This method is responsible for reading the sub-content under a post for
 content related to a "photo" post. This is the most complex of the post
 types, as far as the XML is concerned -- but is also the least consistent of
 the different data types. There is one consistent child element that always
 appears ("photo-caption"), and then there is content for each photo within
 the post. For each photo, there are 6 "photo-url" elements, for URLs to
 differently sized versions of the same image (1280, 500, 400, ...).
 </p>
 
 <p>
 The tricky part, for "photo" posts, is that there could be <i>one</i> photo,
 or there could be <i>multiple</i> (each with 6 "photo-url" elements), and the
 structure is different for both cases:
 </p>
 
 <ul>
 <li>If there is only one photo, it is represented by simply appending the 6
 "photo-url" elements right to the main "post" element</li>
 <li>If there are multiple photos, Tumblr treats it like a <b>photoset</b>, in
 which case a "photoset" element is added to the "post", under which is one
 "photo" element for each photo, under which are the 6 "photo-url" elements
 (the same as for a single photo).</li>
 <li>Even in the case where there is a "photoset", the <i>first</i> image in
 that photoset is duplicated, as 6 "photo-url" elements under the "post"
 element. These "photo-url" elements come before the "photoset", so they're
 read before the XML parser even realizes that there is a "photoset"
 coming.</li>
 </ul>
 
 <p>
 In order to deal with this complexity, processing of a "photo" post works as
 follows:
 </p>
 
 <ol>
 <li>The "photo-caption" element is read in. (It is added to every
 <code>Photo</code> object created, which is not optimal, but... still.)</li>
 <li>Any "photo-url" elements are read in, and the inforamtion is saved for
 later use</li>
 <li><i>If</i> there is a "photoset" element, a sub-method is called for
 parsing the content. That method will create a <code>Photo</code> object for
 each photo it encounters.</li>
 <li>When the end of the "post" element is reached, the list of
 <code>Photo</code> objects is checked, to see if any were created (as part of
 a photoset) or not; if not, a single <code>Photo</code> object is created,
 with the URL and caption data already collected, and put in the collection.
 If the collection is already populated, it is simply returned as-is, since
 the "photo-url" elements at the root of the <code>&lt;post&gt;</code> element
 are duplicated in the "photoset", and have therefore already been added.</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader being used to parse the XML</dd>
<dd><code>post</code> - The currently processed post</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of <code>Photo</code> objects</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readPhotoStream-javax.xml.stream.XMLEventReader-java.lang.Long-java.lang.String-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPhotoStream</h4>
<pre>private static&nbsp;java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;readPhotoStream(javax.xml.stream.XMLEventReader&nbsp;reader,
                                                     java.lang.Long&nbsp;postID,
                                                     java.lang.String&nbsp;photoCaption,
                                                     java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Photo.html" title="class in com.tiyb.tev.datamodel">Photo</a>&gt;&nbsp;photos)
                                              throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-components of a "photo" post
 specific to the "photoset". Within a photoset, there are multiple "photo"
 elements, each of which contains 6 "photo-url" elements, for the different
 sizes of that photo. Because there is some duplication in the model, the
 caption is passed from the parent method into this one, and added to each
 photo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event reader used for parsing</dd>
<dd><code>postID</code> - The ID of the currently processed post</dd>
<dd><code>photoCaption</code> - The caption to be used on each photo</dd>
<dd><code>photos</code> - The list of photos that already exists, to which new
                     photos will be added.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readVideos-javax.xml.stream.XMLEventReader-com.tiyb.tev.datamodel.Post-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readVideos</h4>
<pre>private static&nbsp;<a href="../../../../com/tiyb/tev/datamodel/Video.html" title="class in com.tiyb.tev.datamodel">Video</a>&nbsp;readVideos(javax.xml.stream.XMLEventReader&nbsp;reader,
                                <a href="../../../../com/tiyb/tev/datamodel/Post.html" title="class in com.tiyb.tev.datamodel">Post</a>&nbsp;post)
                         throws javax.xml.stream.XMLStreamException</pre>
<div class="block">This method is responsible for reading the sub-content under a post for
 content related to a "video" post. The content contains a number of elements,
 most of which are simply read into a property of the <code>Video</code>
 object
 
 <ul>
 <li>content-type</li>
 <li>extension (the filename extension)</li>
 <li>width</li>
 <li>height</li>
 <li>duration</li>
 <li>revision</li>
 <li>video-caption (the body of the post)</li>
 <li>multiple "video-player" elements (for different sizes of the video) which
 are ignored</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event parser</dd>
<dd><code>post</code> - The currently processed post</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The video data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="readCharacters-javax.xml.stream.XMLEventReader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCharacters</h4>
<pre>private static&nbsp;java.lang.String&nbsp;readCharacters(javax.xml.stream.XMLEventReader&nbsp;reader)
                                        throws javax.xml.stream.XMLStreamException</pre>
<div class="block"><p>
 This is a helper function, which reads characters out of an element, up to
 the end of that element (the closing tag). There can be multiple events fired
 as the event reader goes through the content, up to the end of the tag,
 because there can be a mix of "text" content and "CDATA" content; both of
 these are combined together into one String. Because the event for the
 closing tag is consumed here, it cannot be consumed by the calling method,
 but the logic for all of the calling methods takes that into account.
 </p>
 
 <p>
 Any character entities within the data -- e.g. &amp;gt; and &amp;lt; instead
 of &gt; and &lt; -- get unescaped, which is the desired behaviour for this
 app.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reader</code> - The event parser from which the text should be extracted.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A simple <code>String</code> with the returned text</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code></dd>
</dl>
</li>
</ul>
<a name="loadTypeData-java.util.List-java.util.Map-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadTypeData</h4>
<pre>private static&nbsp;void&nbsp;loadTypeData(java.util.List&lt;<a href="../../../../com/tiyb/tev/datamodel/Type.html" title="class in com.tiyb.tev.datamodel">Type</a>&gt;&nbsp;allowableTypes,
                                 java.util.Map&lt;java.lang.Long,java.lang.String&gt;&nbsp;typeEntries,
                                 java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;typeIDs)</pre>
<div class="block">Helper function which does nothing but create two opposite <code>Map</code>
 objects, with Type data:
 
 <ul>
 <li>One with the ID as the key, and the type as the field, and</li>
 <li>One with the type as the key, and the ID as the field</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowableTypes</code> - The full list of types from the database, with their
                       corresponding IDs</dd>
<dd><code>typeEntries</code> - The <code>Map</code> to be used with ID as key and type
                       as value</dd>
<dd><code>typeIDs</code> - The <code>Map</code> to be used with type as the key
                       and ID as value</dd>
</dl>
</li>
</ul>
<a name="addTagToString-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>addTagToString</h4>
<pre>private static&nbsp;java.lang.String&nbsp;addTagToString(java.lang.String&nbsp;original,
                                               java.lang.String&nbsp;tag)</pre>
<div class="block">Helper function to add a tag to a list of tags; the intent is for the list to
 be comma-separated</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>original</code> - The existing list of tags (which could be empty)</dd>
<dd><code>tag</code> - The tag to be added</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Amended string</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlogXmlReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/tiyb/tev/xml/ConversationXmlReader.html" title="class in com.tiyb.tev.xml"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/tiyb/tev/xml/BlogXmlReader.html" target="_top">Frames</a></li>
<li><a href="BlogXmlReader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019. All Rights Reserved.</small></p>
</body>
</html>
